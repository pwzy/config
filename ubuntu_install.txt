# 
lspci | grep VGA

# 卸载原有的驱动
sudo apt-get remove --purge nvidia-*

运行 lsmod | grep nouveau，如果有输出则代表nouveau正在加载。需要我们手动禁掉nouveau。

sudo gedit /etc/modprobe.d/blacklist.conf
在末尾加入
blacklist nouveau
options nouveau modeset=0
然后保存，之后更新
sudo update-initramfs -u



# 重启运行以下命令如果无输出则禁用成功
lsmod | grep nouveau

# 安装gcc ，直接 sudo apt-get install build-essential 安装必要的工具后对gcc和g++进行降级

sudo apt-get install -y gcc-7
sudo apt-get install -y g++-7

# 建立软连接进行降级
cd /usr/bin
sudo rm gcc
sudo ln -s gcc-7 gcc
sudo rm g++
sudo ln -s g++-7 g++

# 检查gcc版本是否降级成功
gcc --version

# 安装nvidia驱动

# 先禁用X-Window服务，安装显卡驱动需要禁用该服务，否则会安装终止，并出现相应需要禁用该服务的错误。（不是必要的）
sudo service lightdm stop
或者
sudo /etc/init.d/lighdm stop

sudo ./nvidia-XXX --no-opengl-files --no-nouveau-check --no-x-check

# 安装完成后重新启动桌面服务
sudo service lightdm start



